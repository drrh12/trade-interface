(this["webpackJsonpcrypto-trader"]=this["webpackJsonpcrypto-trader"]||[]).push([[0],{123:function(e,n,t){},124:function(e,n,t){"use strict";t.r(n);var r,a=t(0),c=t.n(a),o=t(43),i=t.n(o),u=(t(91),t(11)),l=t(27),s=t(143),d=t(32),b=t(33),f=function(){function e(){Object(d.a)(this,e),this.socket=void 0,this.onConnectFn=void 0,this.onReceivedFn=void 0,this.onErrorFn=void 0,this.onCloseFn=void 0,this.socket=void 0,this.onReceivedFn=void 0}return Object(b.a)(e,[{key:"start",value:function(e){var n=this;this.socket=new WebSocket(e),this.socket.onopen=function(){return n.onConnectFn&&n.onConnectFn()},this.socket.onmessage=function(e){var t=e.data;n.onReceivedFn&&n.onReceivedFn(t)},this.socket.onerror=function(e){return n.onErrorFn&&n.onErrorFn(e)},this.socket.onclose=function(){return n.onCloseFn&&n.onCloseFn()}}},{key:"stop",value:function(){throw new Error("Method not implemented.")}},{key:"send",value:function(e){this.socket&&(this.socket.readyState!==this.socket.OPEN?console.warn("Fail to send message as WS is in ".concat(this.socket.readyState," state")):this.socket.send(e))}},{key:"onConnect",value:function(e){this.onConnectFn=e}},{key:"onReceived",value:function(e){this.onReceivedFn=e}},{key:"onError",value:function(e){this.onErrorFn=e}},{key:"onClose",value:function(e){this.onCloseFn=e}}]),e}(),j=function(){function e(n){Object(d.a)(this,e),this.connectionProxy=n}return Object(b.a)(e,[{key:"connect",value:function(e){this.connectionProxy.start(e)}},{key:"disconnect",value:function(){this.connectionProxy.stop()}},{key:"send",value:function(e){this.connectionProxy.send(e)}},{key:"onConnect",value:function(e){this.connectionProxy.onConnect(e)}},{key:"onReceive",value:function(e){this.connectionProxy.onReceived(e)}},{key:"onError",value:function(e){this.connectionProxy.onError(e)}},{key:"onClose",value:function(e){this.connectionProxy.onClose(e)}}]),e}(),O=t(133),p=t(5),h=t(126),v=t(80),m=t(36),y=t(56),g=t(131),C=t(125),x=t(146),k=t(54),S=t(53),A=t(132),F=t(147),w=t(130),R=t(129),T={bootstrapApp:Object(R.a)("APP/BOOTSTRAP_APP")};!function(e){e[e.Unknown=0]="Unknown",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected"}(r||(r={}));var E=t(10),P=Object(E.a)((function(e){return e.refData}),(function(e){return e.currencyPairs})),B={loadRefData:Object(R.a)("REF_DATA/LOAD_REF_DATA"),loadRefDataAck:Object(R.a)("REF_DATA/LOAD_REF_DATA_ACK",(function(e){return{payload:e}})),loadRefDataNack:Object(R.a)("REF_DATA/LOAD_REF_DATA_NACK")},N={selectCurrencyPair:Object(R.a)("SELECTION/SELECT_CURRENCY_PAIR",(function(e){return{payload:e}}))},D={init:Object(R.a)("TRANSPORT/INIT",(function(e){return{payload:e}})),sendMessage:Object(R.a)("TRANSPORT/SEND_MESSAGE",(function(e){return{payload:e}})),receiveMessage:Object(R.a)("TRANSPORT/RECEIVE_MESSAGE",(function(e,n){return{payload:e,meta:n}})),changeConnectionStatus:Object(R.a)("TRANSPORT/CHANGE_CONNECTION_STATUS",(function(e){return{payload:e}})),subscribeToChannel:Object(R.a)("TRANSPORT/SUBSCRIBE_TO_CHANNEL",(function(e){return{payload:e}})),subscribeToChannelAck:Object(R.a)("TRANSPORT/SUBSCRIBE_TO_CHANNEL_ACK",(function(e){return{payload:e}})),subscribeToChannelNack:Object(R.a)("TRANSPORT/SUBSCRIBE_TO_CHANNEL_NACK",(function(e){return{payload:e}})),unsubscribeFromChannel:Object(R.a)("TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL",(function(e){return{payload:e}})),unsubscribeFromChannelAck:Object(R.a)("TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL_ACK",(function(e){return{payload:e}})),unsubscribeFromChannelNack:Object(R.a)("TRANSPORT/UNSUBSCRIBE_FROM_CHANNEL_NACK",(function(e){return{payload:e}})),staleSubscription:Object(R.a)("TRANSPORT/STALE_SUBSCRIPTION",(function(e){return{payload:e}}))},L=t(66),_=t(65),I=t.n(_);function M(e){return"undefined"===typeof e?["",""]:[e.slice(0,3),e.slice(3)]}function z(e){var n=M(e),t=Object(p.a)(n,2);return[t[0],t[1]].join(" / ")}var U=function(e){return I()(e).format("0,0.00")},G={subscribeToTicker:Object(R.a)("TICKER/SUBSCRIBE_TO_TICKER",(function(e){return{payload:e}}))},W={subscribeToCandles:Object(R.a)("CANDLES/SUBSCRIBE_TO_CANDLES",(function(e){return{payload:e}})),unsubscribeFromCandles:Object(R.a)("CANDLES/UNSUBSCRIBE_FROM_CANDLES",(function(e){return{payload:e}}))},q=Object(E.a)((function(e){return e.selection}),(function(e){return e.currencyPair})),H=Object(O.a)((function(e,n){return e.pipe(Object(w.a)(T.bootstrapApp),Object(g.a)((function(){return console.log("Bootstrap App"),Object(h.a)(e.pipe(Object(w.a)(D.changeConnectionStatus),Object(C.a)((function(e){return e.payload===r.Connected})),Object(g.a)((function(){return Object(h.a)(Object(v.a)(B.loadRefData()),e.pipe(Object(w.a)(B.loadRefDataAck),Object(x.a)(1),Object(k.a)((function(){var e=P(n.value),t=[N.selectCurrencyPair({currencyPair:q(n.value)||e[0]})],r=e.map((function(e){return G.subscribeToTicker({symbol:e})})),a=e.map((function(e){return W.subscribeToCandles({symbol:e,timeframe:"5m"})}));return Object(h.a)(Object(m.a)(t),Object(m.a)(r),Object(m.a)(a))}))))}))),Object(v.a)(D.init({wsEndpoint:"wss://api-pub.bitfinex.com/ws/2"})))})))}),(function(e,n){return e.pipe(Object(w.a)(N.selectCurrencyPair),Object(g.a)((function(e){var t=e.payload.currencyPair,r=M(t),a=Object(p.a)(r,2)[1];return n.pipe(Object(S.a)((function(e){return e.ticker[t]})),Object(A.a)(),Object(C.a)((function(e){return"undefined"!==typeof e})),Object(F.a)((function(e){var n;return document.title="(".concat(null===(n=e.lastPrice)||void 0===n?void 0:n.toFixed(2)," ").concat(a,")  Trade Interface")})),Object(k.a)((function(){return y.a})))})))})),K=t(6),V=t(7),Y=t(138),Z=t(134),J=t(144),X=t(135),$=t(136),Q=t(137),ee=t(45),ne=Object(O.a)((function(e,n,t){var a=t.connection;return e.pipe(Object(w.a)(D.init),Object(x.a)(1),Object(g.a)((function(e){var t=e.payload.wsEndpoint;return a.connect(t),new V.a((function(e){a.onConnect((function(){console.log("Connected"),e.next(D.changeConnectionStatus(r.Connected))})),a.onReceive((function(t){var r=JSON.parse(t),a=void 0,c=void 0;Array.isArray(r)?c=r[0]:r.hasOwnProperty("chanId")&&(c=r.chanId),c&&n.value.subscriptions[c]&&(a=n.value.subscriptions[c]),e.next(D.receiveMessage(r,a))})),a.onClose((function(){console.log("Disconnected"),e.next(D.changeConnectionStatus(r.Disconnected))}))}))})))}),(function(e,n,t){var r=t.connection;return e.pipe(Object(w.a)(D.sendMessage),Object(k.a)((function(e){return r.send(JSON.stringify(e.payload)),y.a})))}),(function(e){return e.pipe(Object(w.a)(D.subscribeToChannel,D.unsubscribeFromChannel),Object(Z.a)((function(n){var t=n.type===D.subscribeToChannel.type;return Object(h.a)(e.pipe(Object(w.a)(D.receiveMessage),Object(C.a)((function(e){return t&&"subscribed"===e.payload.event&&e.payload.channel===n.payload.channel||!t&&"unsubscribed"===e.payload.event||"error"===e.payload.event})),Object(x.a)(1),Object(J.a)(5e3),Object(S.a)((function(e){if("error"===e.payload.event)return t?D.subscribeToChannelNack({error:e.payload.msg}):D.unsubscribeFromChannelNack();var r=e.payload,a=r.channel,c=r.chanId;return t?D.subscribeToChannelAck({channel:a,channelId:c,request:n.payload}):D.unsubscribeFromChannelAck({channelId:c})})),Object(X.a)((function(){return t?Object(ee.of)(D.subscribeToChannelNack({error:"Timeout"})):Object(ee.of)(D.unsubscribeFromChannelNack())}))),t?Object(ee.of)(D.sendMessage(Object(K.a)({event:"subscribe"},n.payload))):Object(ee.of)(D.sendMessage({event:"unsubscribe",chanId:n.payload.channelId})))})))}),(function(e){return e.pipe(Object(w.a)(D.subscribeToChannelAck),Object(k.a)((function(n){var t=n.payload.channelId;return e.pipe(Object(w.a)(D.receiveMessage),Object(C.a)((function(e){return e.payload[0]===t})),Object(S.a)((function(){return null})),Object($.a)(2e4),Object(C.a)((function(e){return 0===e.length})),Object(S.a)((function(){return D.staleSubscription({channelId:t})})),Object(Q.a)(Object(h.a)(e.pipe(Object(w.a)(D.unsubscribeFromChannel),Object(C.a)((function(e){return e.payload.channelId===t}))),e.pipe(Object(w.a)(D.changeConnectionStatus),Object(C.a)((function(e){return e.payload===r.Connected}))))))})))}),(function(e){return e.pipe(Object(w.a)(D.changeConnectionStatus),Object(C.a)((function(e){return e.payload===r.Disconnected})),Object(g.a)((function(){return Object(Y.a)(1e3).pipe(Object(S.a)((function(){return T.bootstrapApp()})))})))})),te={subscribeToTrades:Object(R.a)("TRADES/SUBSCRIBE_TO_TRADES",(function(e){return{payload:e}})),unsubscribeFromTrades:Object(R.a)("TRADES/UNSUBSCRIBE_FROM_TRADES",(function(e){return{payload:e}}))},re=t(13),ae=t(9),ce=Object(E.a)((function(e){return e.subscriptions}),(function(e){return e})),oe=Object(E.a)(ce,(function(e){return Object(ae.memoize)((function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(e).map(Number);return r.find((function(r){return e[r].channel===n&&Object.keys(t).every((function(n){return t[n]===e[r].request[n]}))}))}),(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[e].concat(Object(re.a)(Object.keys(n).sort().map((function(e){return"".concat(e,"=").concat(n[e])})))).join(":")}))})),ie=Object(E.a)(ce,(function(e){return function(n){var t;return Boolean(null===(t=e[n])||void 0===t?void 0:t.isStale)}})),ue=Object(O.a)((function(e){return e.pipe(Object(w.a)(te.subscribeToTrades),Object(S.a)((function(e){var n=e.payload.symbol,t={channel:"trades",symbol:"t".concat(n)};return D.subscribeToChannel(t)})))}),(function(e,n){return e.pipe(Object(w.a)(te.unsubscribeFromTrades),Object(k.a)((function(e){var t=e.payload.symbol,r=[],a=oe(n.value)("trades",{symbol:"t".concat(t)});return"undefined"!==typeof a?r.push(D.unsubscribeFromChannel({channelId:a})):console.warn("Failed to find trades subscription"),Object(m.a)(r)})))})),le=t(139),se=Object(O.a)((function(e){return e.pipe(Object(w.a)(B.loadRefData),Object(g.a)((function(){return Object(le.a)("data/currencyPairs.json").pipe(Object(g.a)((function(e){return e.json()})),Object(S.a)((function(e){return B.loadRefDataAck({currencyPairs:e})})),Object(X.a)((function(){return Object(v.a)(B.loadRefDataNack())})))})))})),de=Object(O.a)((function(e){return e.pipe(Object(w.a)(G.subscribeToTicker),Object(S.a)((function(e){var n=e.payload.symbol,t={channel:"ticker",symbol:"t".concat(n)};return D.subscribeToChannel(t)})))})),be=Object(O.a)((function(e){return e.pipe(Object(w.a)(W.subscribeToCandles),Object(S.a)((function(e){var n=e.payload,t=n.symbol,r={channel:"candles",key:["trade",n.timeframe,"t".concat(t)].join(":")};return D.subscribeToChannel(r)})))}),(function(e,n){return e.pipe(Object(w.a)(W.unsubscribeFromCandles),Object(k.a)((function(e){var t=e.payload,r=t.symbol,a=t.timeframe,c=[],o=oe(n.value)("candles",{key:["trade",a,"t".concat(r)].join(":")});return"undefined"!==typeof o?c.push(D.unsubscribeFromChannel({channelId:o})):console.warn("Failed to find candles subscription"),Object(m.a)(c)})))})),fe=t(140),je=t(145),Oe={subscribeToBook:Object(R.a)("BOOK/SUBSCRIBE_TO_BOOK",(function(e){return{payload:e}})),unsubscribeFromBook:Object(R.a)("BOOK/UNSUBSCRIBE_FROM_BOOK",(function(e){return{payload:e}}))},pe=Object(O.a)((function(e,n){var t=n.pipe(Object(fe.a)());return e.pipe(Object(w.a)(N.selectCurrencyPair),Object(je.a)(t),Object(g.a)((function(e){var n=Object(p.a)(e,2),t=n[0],r=Object(p.a)(n[1],2),a=r[0],c=(r[1],q(a)),o=t.payload.currencyPair,i=[];c&&i.push(W.unsubscribeFromCandles({symbol:c,timeframe:"1m"}),Oe.unsubscribeFromBook({symbol:c}),te.unsubscribeFromTrades({symbol:c}));var u=[W.subscribeToCandles({symbol:o,timeframe:"1m"}),Oe.subscribeToBook({symbol:o}),te.subscribeToTrades({symbol:o})];return Object(m.a)([].concat(i,u))})))})),he=Object(O.a)((function(e){return e.pipe(Object(w.a)(Oe.subscribeToBook),Object(S.a)((function(e){var n=e.payload.symbol,t={channel:"book",symbol:"t".concat(n),prec:"R0"};return D.subscribeToChannel(t)})))}),(function(e,n){return e.pipe(Object(w.a)(Oe.unsubscribeFromBook),Object(k.a)((function(e){var t=e.payload.symbol,r=[],a=oe(n.value)("book",{symbol:"t".concat(t)});return"undefined"!==typeof a?r.push(D.unsubscribeFromChannel({channelId:a})):console.warn("Failed to find book subscription"),Object(m.a)(r)})))})),ve=t(141),me={updateLatency:Object(R.a)("PING/UPDATE_LATENCY",(function(e){return{payload:e}}))},ye=Object(O.a)((function(e){return e.pipe(Object(w.a)(D.changeConnectionStatus),Object(C.a)((function(e){return e.payload===r.Connected})),Object(g.a)((function(){return Object(ve.a)(5e3).pipe(Object(g.a)((function(n){var t=n+1,r=Date.now();return Object(h.a)(e.pipe(Object(w.a)(D.receiveMessage),Object(C.a)((function(e){return!Array.isArray(e.payload)&&"pong"===e.payload.event&&e.payload.cid===t})),Object(x.a)(1),Object(J.a)(4900),Object(S.a)((function(){return me.updateLatency({latency:Date.now()-r})})),Object(X.a)((function(){return Object(v.a)(me.updateLatency({latency:-1}))}))),Object(v.a)(D.sendMessage({event:"ping",cid:t})))})))})))})),ge=t(16),Ce=t(142);function xe(e){return Array.isArray(e.payload)&&"hb"===e.payload[1]}function ke(e){return"subscribed"===e.payload.event}function Se(e){return"unsubscribed"===e.payload.event}function Ae(e){return"error"===e.payload.event}var Fe={};function we(e,n){return Object(p.a)(n.payload,2)[1].sort((function(e,n){return n[1]-e[1]})).map((function(e){var n=Object(p.a)(e,4);return{id:n[0],timestamp:n[1],amount:n[2],price:n[3]}}))}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=Object(p.a)(n.payload,3),r=t[2],a=Object(p.a)(r,4),c=a[0],o=a[1],i=a[2],u=a[3],l=e.findIndex((function(e){return e.id===c})),s={id:c,timestamp:o,amount:i,price:u};if(l>=0){var d=e.slice();return d.splice(l,1,s),d}return[s].concat(Object(re.a)(e))}var Te=Object(Ce.b)(Fe,Object(Ce.a)(D.changeConnectionStatus,(function(e,n){return n.payload===r.Connected?Fe:e})),Object(Ce.a)(D.receiveMessage,(function(e,n){if(xe(n)||ke(n)||Ae(n))return e;var t=n.meta||{},r=t.channel,a=t.request;if("trades"===r){var c=a.symbol.slice(1);if(Se(n)){var o=Object(K.a)({},e);return delete o[c],o}var i=(Array.isArray(n.payload[1])?we:Re)(e[c],n);return Object(K.a)(Object(K.a)({},e),{},Object(ge.a)({},c,i.slice(0,100)))}return e}))),Ee={},Pe=Object(Ce.b)(Ee,Object(Ce.a)(D.changeConnectionStatus,(function(e,n){return n.payload===r.Connected?Ee:e})),Object(Ce.a)(D.subscribeToChannelAck,(function(e,n){var t=n.payload,r=t.request,a=t.channel,c=t.channelId;return Object(K.a)(Object(K.a)({},e),{},Object(ge.a)({},c,{channel:a,request:r}))})),Object(Ce.a)(D.unsubscribeFromChannelAck,(function(e,n){var t=n.payload.channelId,r=Object(K.a)({},e);return delete r[t],r})),Object(Ce.a)(D.receiveMessage,(function(e,n){if(xe(n)){var t=Object(p.a)(n.payload,1)[0];return Boolean(e[t].isStale)?Object(K.a)(Object(K.a)({},e),{},Object(ge.a)({},t,Object(K.a)(Object(K.a)({},e[t]),{},{isStale:!1}))):e}return e})),Object(Ce.a)(D.staleSubscription,(function(e,n){var t=n.payload.channelId;return Object(K.a)(Object(K.a)({},e),{},Object(ge.a)({},t,Object(K.a)(Object(K.a)({},e[t]),{},{isStale:!0})))}))),Be=Object(Ce.b)({currencyPairs:[]},Object(Ce.a)(B.loadRefDataAck,(function(e,n){var t=n.payload.currencyPairs;return Object(K.a)(Object(K.a)({},e),{},{currencyPairs:t})}))),Ne={},De=Object(Ce.b)(Ne,Object(Ce.a)(D.changeConnectionStatus,(function(e,n){return n.payload===r.Connected?Ne:e})),Object(Ce.a)(D.receiveMessage,(function(e,n){if(xe(n))return e;var t=n.meta||{},r=t.channel,a=t.request;if("ticker"===r){var c=a.symbol.slice(1),o=Object(p.a)(n.payload,2),i=Object(p.a)(o[1],10),u=i[0],l=i[1],s=i[2],d=i[3],b=i[4],f=i[5],j=i[6],O=i[7],h=i[8],v=i[9];return Object(K.a)(Object(K.a)({},e),{},Object(ge.a)({},c,{currencyPair:c,bid:u,bidSize:l,ask:s,askSize:d,dailyChange:b,dailyChangeRelative:f,lastPrice:j,volume:O,high:h,low:v}))}return e}))),Le=function(e,n){return[e,n].join(":")},_e={};function Ie(e,n){return Object(p.a)(n.payload,2)[1].map((function(e){var n=Object(p.a)(e,6);return{timestamp:n[0],open:n[1],close:n[2],high:n[3],low:n[4],volume:n[5]}})).sort((function(e,n){return n.timestamp-e.timestamp}))}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=Object(p.a)(n.payload,2),r=t[1],a=Object(p.a)(r,6),c=a[0],o=a[1],i=a[2],u=a[3],l=a[4],s=a[5],d=e.findIndex((function(e){return e.timestamp===c})),b={timestamp:c,open:o,close:i,high:u,low:l,volume:s};if(d>=0){var f=e.slice();return f.splice(d,1,b),f}return[b].concat(Object(re.a)(e))}var ze=Object(Ce.b)(_e,Object(Ce.a)(D.changeConnectionStatus,(function(e,n){return n.payload===r.Connected?_e:e})),Object(Ce.a)(D.receiveMessage,(function(e,n){if(xe(n)||ke(n)||Ae(n))return e;var t=n.meta||{},r=t.channel,a=t.request;if("candles"===r){var c=a.key.split(":"),o=Object(p.a)(c,3),i=o[1],u=o[2].slice(1),l=Le(u,i);if(Se(n)){var s=Object(K.a)({},e);return delete s[l],s}var d=(Array.isArray(n.payload[1][0])?Ie:Me)(e[l],n);return Object(K.a)(Object(K.a)({},e),{},Object(ge.a)({},l,d.slice(0,100)))}return e}))),Ue=Object(Ce.b)({},Object(Ce.a)(N.selectCurrencyPair,(function(e,n){var t=n.payload.currencyPair;return Object(K.a)(Object(K.a)({},e),{},{currencyPair:t})}))),Ge={};function We(e,n){return Object(p.a)(n.payload,2)[1].map((function(e){var n=Object(p.a)(e,3);return{id:n[0],price:n[1],amount:n[2]}}))}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=Object(p.a)(n.payload,2),r=t[1],a=Object(p.a)(r,3),c=a[0],o=a[1],i=a[2],u=e.findIndex((function(e){return e.id===c})),l={id:c,price:o,amount:i};if(0===o&&u>=0){var s=e.slice();return s.splice(u,1),s}if(u>=0){var d=e.slice();return d.splice(u,1,l),d}return[].concat(Object(re.a)(e),[l])}var He=Object(Ce.b)(Ge,Object(Ce.a)(D.changeConnectionStatus,(function(e,n){return n.payload===r.Connected?Ge:e})),Object(Ce.a)(D.receiveMessage,(function(e,n){if(xe(n)||ke(n)||Ae(n))return e;var t=n.meta||{},r=t.channel,a=t.request;if("book"===r){var c=a.symbol.slice(1);if(Se(n)){var o=Object(K.a)({},e);return delete o[c],o}var i=(Array.isArray(n.payload[1][0])?We:qe)(e[c],n);return Object(K.a)(Object(K.a)({},e),{},Object(ge.a)({},c,i))}return e}))),Ke={latency:void 0},Ve=Object(Ce.b)(Ke,Object(Ce.a)(me.updateLatency,(function(e,n){var t=n.payload.latency;return Object(K.a)(Object(K.a)({},e),{},{latency:t})}))),Ye=Object(O.a)(H,se,ne,ue,de,be,pe,he,ye),Ze=Object(l.c)({refData:Be,subscriptions:Pe,trades:Te,ticker:De,candles:ze,selection:Ue,book:He,ping:Ve}),Je={connection:new j(new f)},Xe=Object(s.a)({dependencies:Je}),$e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d;var Qe,en,nn,tn,rn,an,cn,on,un,ln,sn,dn,bn,fn,jn,On,pn,hn,vn=t(35),mn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,t=Object(a.useMemo)((function(){return Object(ae.throttle)(e,n)}),[e,n]);return Object(a.useEffect)((function(){return function(){t.cancel()}}),[t]),t},yn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,t=Object(a.useState)(e),r=Object(p.a)(t,2),c=r[0],o=r[1],i=mn(o,n);return i(e),c},gn=function(e){return U(e.value)},Cn=function(e){return(n=e.value)?n.toString():"";var n},xn=function(e){return n=e.value,I()(n).format("0.00 a");var n},kn=function(e){return n=e.value,L.DateTime.fromMillis(n).toLocaleString(L.DateTime.TIME_24_WITH_SECONDS);var n},Sn=function(e){Object(a.useEffect)((function(){e&&e.sizeColumnsToFit();var n=Object(ae.debounce)((function(){e&&e.sizeColumnsToFit()}),200);return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[e])},An=t(3),Fn=t(4),wn={Bid:"#00AD08",Ask:"#FF264D",BidTransparent:"rgba(0, 173, 8, 0.2)",AskTransparent:"rgba(255, 38, 77, 0.2)",Positive:"#00AD08",Negative:"#FF264D",Orange:"#FFA41B",White:"#FFF",BackgroundColor:"#222",Label:"rgba(245, 245, 245, 0.64)",Border:"#424242",LightGray:"rgba(245, 245, 245, 0.64)",DarkGray:"#63666D"},Rn="\n    background: ".concat(wn.LightGray,";\n    animation: loadingAnimation 1s infinite ease-in-out;\n    width: ").concat(5,"px;\n    height: ").concat(20,"px;\n"),Tn=Fn.a.div(Qe||(Qe=Object(An.a)(['\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  z-index: 1;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 1fr 1fr;\n  grid-template-areas:\n    "icon"\n    "title";\n\n  justify-items: center;\n']))),En=Fn.a.div(en||(en=Object(An.a)(["\n  font-size: 11px;\n  font-family: FiraSans-Light;\n  grid-area: title;\n  align-self: flex-start;\n  color: ",";\n"])),wn.LightGray),Pn=Fn.a.div(nn||(nn=Object(An.a)(["\n  position: relative;\n  grid-area: icon;\n  align-self: flex-end;\n  margin-bottom: 5px;\n\n  @keyframes loadingAnimation {\n    0%,\n    80%,\n    100% {\n      box-shadow: 0 0 ",";\n      height: ","px;\n    }\n    40% {\n      box-shadow: 0 -","px ",";\n      height: ","px;\n    }\n  }\n\n  ",';\n\n  &:before,\n  &:after {\n    position: absolute;\n    content: "";\n    ',"\n  }\n\n  &:before {\n    left: ","px;\n    animation-delay: -0.2s;\n  }\n\n  &:after {\n    left: ","px;\n    animation-delay: 0.2s;\n  }\n"])),wn.LightGray,20,5,wn.LightGray,24,Rn,Rn,-7,7),Bn=t(1),Nn=function(e){var n=e.title,t=void 0===n?"Loading...":n;return Object(Bn.jsxs)(Tn,{children:[Object(Bn.jsx)(Pn,{}),Object(Bn.jsx)(En,{children:t})]})},Dn=Fn.a.div(tn||(tn=Object(An.a)(["\n  width: 100%;\n  height: 100%;\n  font-family: FiraSans-Light;\n  position: relative;\n"]))),Ln=Fn.a.div(rn||(rn=Object(An.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(34, 34, 34, 0.7);\n  pointer-events: none;\n  z-index: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),_n=function(){return Object(Bn.jsx)(Ln,{children:Object(Bn.jsx)(Nn,{title:"Stale..."})})},In=function(e){var n=e.trades,t=e.isStale,r=yn(n,500),c=Object(a.useState)(),o=Object(p.a)(c,2),i=o[0],u=o[1],l=[{headerName:"Id",field:"id",hide:!0},{headerName:"Amount",field:"amount",valueFormatter:function(e){return Cn({value:Math.abs(e.value)})}},{headerName:"Price",field:"price",cellStyle:function(e){return{color:e.value<0?wn.Ask:wn.Bid}},valueFormatter:gn},{headerName:"Time",field:"timestamp",valueFormatter:kn,cellStyle:function(){return{color:wn.LightGray}}}];return Sn(i),Object(Bn.jsxs)(Dn,{className:"ag-theme-balham-dark",children:[t&&Object(Bn.jsx)(_n,{}),Object(Bn.jsx)(vn.AgGridReact,{columnDefs:l,rowData:r,deltaRowDataMode:!0,getRowNodeId:function(e){return e.id},onGridReady:function(e){u(e.api)},noRowsOverlayComponent:"customLoadingOverlay",frameworkComponents:{customLoadingOverlay:Nn}})]})},Mn=Object(E.a)((function(e){return e.trades}),(function(e){return Object(ae.memoize)((function(n){return e[n]}))})),zn=Object(u.b)((function(e){var n=q(e),t=n?Mn(e)(n):[],r=oe(e)("trades");return{trades:t,isStale:"undefined"!==typeof r&&ie(e)(r)}}))(In),Un=[],Gn=function(e){return e.candles},Wn=Object(E.a)(Gn,(function(e){return Object(ae.memoize)((function(n,t){return e[Le(n,t)]||Un}),(function(e,n){return"".concat(e,":").concat(n)}))})),qn=function(e){return e.ticker},Hn=Object(E.a)(qn,(function(e){return Object(ae.memoize)((function(n){return e[n]}))})),Kn=Object(E.a)(P,qn,(function(e,n){return e.map((function(e){return Object(K.a)({currencyPair:e},n[e])}))})),Vn=Object(E.a)(P,q,(function(e,n){var t=[],r=e.indexOf(n||"");return r>=0&&(t=Object(ae.range)(r-2,r+3).map((function(n){return(t=e,function(e){return t[(e%t.length+t.length)%t.length]})(n);var t}))),{currencyPairs:t,selectedCurrencyPairIndex:r}})),Yn=Object(E.a)(Kn,Gn,oe,ce,(function(e,n,t,r){return e.map((function(e){var a=t("ticker",{symbol:"t".concat(e.currencyPair)});return Object(K.a)(Object(K.a)({},e),{},{prices:(n[Le(e.currencyPair,"5m")]||[]).map((function(e){return e.close})),isStale:Boolean(!!a&&r[a].isStale)})}))})),Zn=function(e){var n=Object(a.useRef)();return Object(a.useEffect)((function(){n.current=e}),[e]),n.current},Jn=Fn.a.div(an||(an=Object(An.a)(['\n  position: relative;\n  cursor: pointer;\n  display: grid;\n  grid-template-rows: 25px 1fr;\n  height: 50px;\n  grid-template-columns: repeat(2, 1fr);\n  grid-template-areas:\n    "currencyPair price"\n    "relativeChange change";\n  font-size: 12px;\n  padding: 5px 10px;\n  border: 1px solid\n    ',";\n\n  &:hover {\n    background-color: #2d3436;\n  }\n\n  "," {\n    background: none;\n    top: 12px;\n    bottom: -12px;\n  }\n"])),(function(e){return e.isActive?wn.Orange:wn.Border}),Ln),Xn=Fn.a.div(cn||(cn=Object(An.a)(["\n  color: ",";\n  grid-area: currencyPair;\n"])),wn.White),$n=Fn.a.div(on||(on=Object(An.a)(["\n  color: ",";\n  grid-area: price;\n  margin-right: 0;\n  margin-left: auto;\n"])),wn.White),Qn=Fn.a.div(un||(un=Object(An.a)(["\n  grid-area: relativeChange;\n  font-size: 18px;\n  color: ",";\n  display: flex;\n  font-family: FiraSans-Medium;\n"])),(function(e){return e.isPositive?wn.Positive:wn.Negative})),et=Fn.a.div(ln||(ln=Object(An.a)(["\n  grid-area: change;\n  margin-right: 0;\n  margin-left: auto;\n  color: ",";\n"])),(function(e){return e.isPositive?wn.Positive:wn.Negative})),nt=Fn.a.div(sn||(sn=Object(An.a)(["\n  display: grid;\n  grid-template-columns: ",";\n  width: 100%;\n"])),(function(e){var n=e.itemCount;return"repeat(".concat(n,", minmax(240px, 1fr))")})),tt=Fn.a.div(dn||(dn=Object(An.a)(["\n  ","\n\n  "," {\n    animation: ",";\n    transform: ",";\n  }\n"])),(function(e){var n=e.itemCount;return Object(ae.range)(0,n).map((function(e){var t=Math.floor(n/2),r=1-(t-(e<=t?e:t-Math.abs(t-e)))/10;return"\n            @keyframes slide-in-".concat(e," {\n                100% { transform: scale(").concat(r,", ").concat(r,") translateX(0%);; }\n            }\n            ")})).reduce((function(e,n){return e+n}),"")}),Jn,(function(e){var n=e.index;return"slide-in-".concat(n," 0.5s forwards;")}),(function(e){var n=e.direction;return"translateX(".concat("left"===n?100:-100,"%);")})),rt=Fn.a.div(bn||(bn=Object(An.a)(["\n  display: flex;\n"]))),at=Fn.a.div(fn||(fn=Object(An.a)([""]))),ct=(Fn.a.div(jn||(jn=Object(An.a)(["\n  color: ",";\n"])),wn.Orange),Fn.a.span(On||(On=Object(An.a)(["\n  display: inline-block;\n"])))),ot=function(e){var n=e.value,t=e.delay,r=void 0===t?0:t,c=e.scale,o=void 0===c?1:c,i=e.duration,u=void 0===i?200:i,l=Object(a.createRef)();return Object(a.useEffect)((function(){var e,n=void 0,t=void 0;if("function"===typeof(null===(e=l.current)||void 0===e?void 0:e.animate)){var a=function(){var e;n=null===(e=l.current)||void 0===e?void 0:e.animate([{color:wn.Orange,transform:"scale(1)"}].concat(Object(re.a)(1===o?[]:[{color:wn.White,transform:"scale(".concat(o,")")}]),[{color:wn.White,transform:"scale(1)"}]),{duration:u,iterations:1})};r?t=setTimeout((function(){return requestAnimationFrame(a)}),r):requestAnimationFrame(a)}return function(){t&&clearTimeout(t),n&&n.cancel()}}),[n]),Object(Bn.jsx)(ct,{ref:l,children:n})},it=function(e){var n=Object(a.createRef)(),t=e.value,r=e.effect,c=void 0===r?"default":r,o=Zn(t),i=Object(a.useState)([]),u=Object(p.a)(i,2),l=Object(p.a)(u[0],2),s=l[0],d=l[1],b=u[1];Object(a.useEffect)((function(){b(function(e,n){if(!e||!n)return[e,""];for(var t=Math.min(e.length,n.length),r=0,a=0;a<t&&e[a]===n[a];a++)r++;return[e.slice(0,r),e.slice(r,e.length)]}(t||"",o||""))}),[t]);var f="zoom"===c?null===d||void 0===d?void 0:d.split("").map((function(e,n){return Object(Bn.jsx)(ot,{value:e,delay:100*n,scale:2,duration:300},n)})):Object(Bn.jsx)(ot,{value:d});return Object(Bn.jsxs)(rt,{children:[Object(Bn.jsx)(at,{children:s}),Object(Bn.jsx)("div",{ref:n,children:f})]})},ut=Fn.a.i(pn||(pn=Object(An.a)(["\n  font-size: 16px;\n  line-height: 20px;\n  width: 20px;\n"]))),lt=function(e){var n=e.value,t=Object(a.useState)(!0),r=Object(p.a)(t,2),c=r[0],o=r[1];Object(a.useEffect)((function(){o(!1);var e=setTimeout((function(){return o(!0)}),5e3);return function(){clearTimeout(e)}}),[n]);var i=c?"":n>0?"arrow_upward":n<0?"arrow_downward":"";return Object(Bn.jsx)(ut,{className:"material-icons",children:i})},st=function(e){var n=e.currencyPair,t=e.lastPrice,r=e.dailyChange,a=e.dailyChangeRelative,c=e.onClick,o=e.isActive,i=e.isStale,u=r>0,l=a?100*a:void 0;return Object(Bn.jsx)(Jn,{onClick:c,isActive:!!o,children:i?Object(Bn.jsx)(_n,{}):Object(Bn.jsxs)(Bn.Fragment,{children:[Object(Bn.jsx)(Xn,{children:z(n)}),Object(Bn.jsx)($n,{children:Object(Bn.jsx)(it,{value:U(t),effect:"zoom"})}),Object(Bn.jsxs)(Qn,{isPositive:u,children:[Object(Bn.jsx)(lt,{value:a}),Object(Bn.jsx)(it,{value:null===l||void 0===l?void 0:l.toFixed(2)}),l&&"%"]}),Object(Bn.jsx)(et,{isPositive:u,children:Object(Bn.jsx)(it,{value:null===r||void 0===r?void 0:r.toFixed(2)})})]})})},dt=Object(u.b)((function(e,n){var t=n.currencyPair,r=q(e),a=Hn(e)(t),c=oe(e)("ticker",{symbol:"t".concat(t)}),o="undefined"!==typeof c&&ie(e)(c);return{lastPrice:null===a||void 0===a?void 0:a.lastPrice,currencyPair:t,dailyChangeRelative:null===a||void 0===a?void 0:a.dailyChangeRelative,dailyChange:null===a||void 0===a?void 0:a.dailyChange,isActive:r===t,isStale:o}}),(function(e,n){var t=n.currencyPair;return{onClick:function(){return e(N.selectCurrencyPair({currencyPair:t}))}}}))(st),bt=function(e){var n=e.currencyPairs,t=e.selectedCurrencyPairIndex,r=Object(a.useState)("left"),c=Object(p.a)(r,2),o=c[0],i=c[1],u=Zn(t);return Object(a.useEffect)((function(){i((u||0)>(t||0)?"right":"left")}),[t]),Object(Bn.jsx)(nt,{itemCount:n.length,className:"tickers",children:n.map((function(e,t){return Object(Bn.jsx)(tt,{index:t,itemCount:n.length,direction:o,children:Object(Bn.jsx)(dt,{currencyPair:e})},e)}))})},ft=Object(u.b)((function(e){var n=Vn(e);return{currencyPairs:n.currencyPairs,selectedCurrencyPairIndex:n.selectedCurrencyPairIndex}}))(bt),jt=t(85),Ot=t(42),pt=t(58),ht=t.n(pt),vt=Fn.a.div(hn||(hn=Object(An.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  position: relative;\n"])));Ot.theme={colors:["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:{stops:[[0,"#2a2a2b"],[1,"#3e3e40"]]}},xAxis:{labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:wn.Border,labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"}}},tooltip:{borderColor:wn.Border,backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:wn.White}},plotOptions:{series:{dataLabels:{color:"#F0F0F3",style:{fontSize:"13px"}},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{backgroundColor:"rgba(0, 0, 0, 0.5)",itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"},title:{style:{color:"#C0C0C0"}}},credits:{style:{color:"#666"}},labels:{style:{color:"#707073"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"}},Ot.setOptions(Ot.theme);var mt,yt,gt=function(e){var n=e.candles,t=e.currencyPair,r=e.isStale,c=Object(a.useState)(!0),o=Object(p.a)(c,2),i=o[0],u=o[1],l=Object(a.useState)({time:{useUTC:!1},yAxis:[{labels:{align:"right",x:-3},title:{text:"OHLC"},height:"70%",lineWidth:2,resize:{enabled:!0}},{labels:{align:"right",x:-3},title:{text:"Volume"},top:"75%",height:"25%",offset:0,lineWidth:2}],series:[{type:"candlestick",data:[]},{type:"column",name:"Volume",data:[],yAxis:1}],rangeSelector:{selected:2,buttons:[{type:"minute",count:5,text:"5m"},{type:"minute",count:15,text:"15m"},{type:"minute",count:30,text:"30m"},{type:"hour",count:1,text:"1h"},{type:"hour",count:12,text:"12h"},{type:"all",text:"All"}]}}),s=Object(p.a)(l,2),d=s[0],b=s[1];return Object(a.useEffect)((function(){u(0===n.length);var e=n.map((function(e){var n=e.timestamp,t=Object(jt.a)(e,["timestamp"]);return Object(K.a)({x:n},t)})).sort((function(e,n){return e.x-n.x})),r=n.map((function(e){return[e.timestamp,e.volume]})).sort((function(e,n){return e[0]-n[0]}));b({series:[{type:"candlestick",name:t&&z(t),data:e},{type:"column",data:r}],plotOptions:{candlestick:{color:wn.Negative,upColor:wn.Positive},column:{color:wn.LightGray}}})}),[n,t]),Object(Bn.jsxs)(vt,{className:"candles-chart",children:[r&&Object(Bn.jsx)(_n,{}),i&&Object(Bn.jsx)(Nn,{}),Object(Bn.jsx)(ht.a,{highcharts:Ot,options:d,constructorType:"stockChart"})]})},Ct=Object(u.b)((function(e){var n=q(e),t=n?Wn(e)(n,"1m"):[],r=oe(e)("candles");return{candles:t,currencyPair:n,isStale:"undefined"!==typeof r&&ie(e)(r)}}))(gt),xt=function(e,n){var t=Object.keys(n).map((function(e){return[e,n[e]].join(":")})).join(";");return'\n        <div style="position: relative;">\n            <div style="height: 30px; position: absolute; z-index: 0; '.concat(t,'"></div>\n            <div style="position: absolute; z-index: 1;">').concat(e,"</div>\n        </div>")},kt=function(e){var n=e.data,t=(n.bidDepth||0)/n.maxDepth*100;return xt(e.valueFormatted,{"background-color":wn.BidTransparent,width:"".concat(t,"%"),left:"-12px"})},St=function(e){var n=e.data,t=(n.askDepth||0)/n.maxDepth*100;return xt(e.valueFormatted,{"background-color":wn.AskTransparent,width:"".concat(t,"%"),right:"-12px"})},At=Fn.a.div(mt||(mt=Object(An.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  font-family: FiraSans-Light;\n"]))),Ft=function(e){var n=e.orders,t=e.isStale,r=Object(a.useState)(),c=Object(p.a)(r,2),o=c[0],i=c[1],u=yn(n,100),l=[{headerName:"Bid Amount",field:"bid.amount",valueFormatter:Cn,cellRenderer:kt},{headerName:"Bid Price",field:"bid.price",cellStyle:function(){return{color:wn.Bid}},type:"numericColumn",valueFormatter:gn},{headerName:"Ask Price",field:"ask.price",cellStyle:function(){return{color:wn.Ask}},valueFormatter:gn},{headerName:"Ask Amount",field:"ask.amount",valueFormatter:function(e){return Cn({value:Math.abs(e.value)})},cellRenderer:St}];return Sn(o),Object(Bn.jsxs)(At,{className:"ag-theme-balham-dark",children:[t&&Object(Bn.jsx)(_n,{}),Object(Bn.jsx)(vn.AgGridReact,{columnDefs:l,rowData:u,deltaRowDataMode:!0,getRowNodeId:function(e){var n,t;return[null===(n=e.bid)||void 0===n?void 0:n.id,null===(t=e.ask)||void 0===t?void 0:t.id].join("#")},onGridReady:function(e){i(e.api)},noRowsOverlayComponent:"customLoadingOverlay",frameworkComponents:{customLoadingOverlay:Nn}})]})},wt=function(e){return e.book},Rt=(Object(E.a)(wt,(function(e){return Object(ae.memoize)((function(n){return e[n]}))})),Object(E.a)(wt,(function(e){return Object(ae.memoize)((function(n){var t=e[n]||[],r=t.filter((function(e){return e.amount>0})).sort((function(e,n){return n.price-e.price})),a=t.filter((function(e){return e.amount<0})).sort((function(e,n){return e.price-n.price})),c=Math.max(r.length,a.length),o=r.map((function(e){return e.amount})).reduce((function(e,n){return e+n}),0)+a.map((function(e){return Math.abs(e.amount)})).reduce((function(e,n){return e+n}),0),i=[];return Object(ae.range)(c).forEach((function(e){var n=r[e],t=a[e];i.push({bid:n,ask:t,bidDepth:n&&(i[e-1]?i[e-1].bidDepth:0)+n.amount,askDepth:t&&(i[e-1]?i[e-1].askDepth:0)+Math.abs(t.amount),maxDepth:o})})),i}))}))),Tt=function(e){return Object(ae.uniq)(e.map((function(e){return e.price}))).sort((function(e,n){return e-n}))},Et=function(e){return function(n,t){return n.map((function(n){var r=e.filter((function(e){return t(e,n)})).reduce((function(e,n){return e+Math.abs(n.amount)}),0);return{price:n,depth:r}}))}},Pt=Object(E.a)(wt,(function(e){return Object(ae.memoize)((function(n){var t=e[n]||[],r=t.filter((function(e){return e.amount>0})),a=t.filter((function(e){return e.amount<0})),c=Tt(r),o=Tt(a);return{bids:Et(r)(c,(function(e,n){return e.price>=n})),asks:Et(a)(o,(function(e,n){return e.price<=n}))}}))})),Bt=Object(u.b)((function(e){var n=q(e),t=n?Rt(e)(n):[],r=oe(e)("book");return{orders:t,isStale:"undefined"!==typeof r&&ie(e)(r)}}))(Ft),Nt=t(31),Dt=Fn.a.div(yt||(yt=Object(An.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  position: relative;\n"])));Nt.theme={colors:["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:{stops:[[0,"#2a2a2b"],[1,"#3e3e40"]]}},xAxis:{labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:wn.Border,labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"}}},tooltip:{borderColor:wn.Border,backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:wn.White}},plotOptions:{series:{dataLabels:{color:"#F0F0F3",style:{fontSize:"13px"}},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{backgroundColor:"rgba(0, 0, 0, 0.5)",itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"},title:{style:{color:"#C0C0C0"}}},credits:{style:{color:"#666"}},labels:{style:{color:"#707073"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"}},Nt.setOptions(Nt.theme);var Lt,_t,It,Mt,zt,Ut,Gt,Wt,qt,Ht,Kt,Vt,Yt,Zt,Jt,Xt,$t,Qt,er,nr,tr,rr,ar,cr,or=function(e){var n=e.depth,t=e.isStale,r=yn(n,500),c=Object(a.useState)(!0),o=Object(p.a)(c,2),i=o[0],u=o[1],l=Object(a.useState)({chart:{type:"area",animation:!1},title:{text:""},legend:{enabled:!1},series:[{name:"bids",type:"area",data:[]},{name:"asks",type:"area",data:[]}],xAxis:{labels:{autoRotation:!1}},yAxis:{title:{text:""},labels:{enabled:!1}},plotOptions:{area:{marker:{enabled:!1,states:{hover:{enabled:!1}}}}}}),s=Object(p.a)(l,2),d=s[0],b=s[1];return Object(a.useEffect)((function(){var e=r.bids,n=r.asks;u(0===e.length&&0===n.length),b({xAxis:{categories:[].concat(Object(re.a)(e),Object(re.a)(n)).map((function(e){return e.price.toString()})),labels:{step:5,formatter:function(){return Number.parseFloat(this.value.toString()).toFixed(0)}}},series:[{name:"bids",type:"area",data:[].concat(Object(re.a)(e.map((function(e){return e.depth}))),Object(re.a)(n.map((function(){return null})))),color:wn.Bid},{name:"asks",type:"area",data:[].concat(Object(re.a)(e.map((function(){return null}))),Object(re.a)(n.map((function(e){return e.depth})))),color:wn.Ask}]})}),[r]),Object(Bn.jsxs)(Dt,{children:[t&&Object(Bn.jsx)(_n,{}),i&&Object(Bn.jsx)(Nn,{}),Object(Bn.jsx)(ht.a,{highcharts:Nt,options:d,constructorType:"chart"})]})},ir=Object(u.b)((function(e){var n=q(e),t=n?Pt(e)(n):{bids:[],asks:[]},r=oe(e)("book");return{depth:t,isStale:"undefined"!==typeof r&&ie(e)(r)}}))(or),ur=Fn.a.div(Lt||(Lt=Object(An.a)(["\n  width: 100%;\n  height: 100%;\n\n  .selected-row {\n    font-weight: 700;\n  }\n\n  .stale-row {\n    opacity: 0.6;\n  }\n"]))),lr=Fn.a.svg(_t||(_t=Object(An.a)(["\n  fill: none;\n"]))),sr=function(e){var n=e.values,t=e.width,r=void 0===t?50:t,a=e.height,c=void 0===a?25:a,o=n.length-1,i=Math.min.apply(Math,Object(re.a)(n)),u=Math.max.apply(Math,Object(re.a)(n))-i,l=function(e){return e/o*r},s=function(e){return c-(e-i)*c/u};if(0===n.length)return Object(Bn.jsx)("div",{});var d="M ".concat(l(0)," ").concat(s(n[0])," ");return d+=n.map((function(e,n){var t=l(n),r=s(e);return"L  ".concat(t,"  ").concat(r," ")})),Object(Bn.jsx)(lr,{viewBox:"0 0 ".concat(r," ").concat(c),children:Object(Bn.jsx)("path",{d:d,style:{stroke:wn.LightGray}})})},dr=Fn.a.div(It||(It=Object(An.a)(["\n  padding: 0 5px;\n"]))),br=function(e){var n=e.value;return Object(Bn.jsx)(dr,{children:Object(Bn.jsx)(sr,{values:n})})},fr=t(86),jr=t(84),Or=it,pr=function(e){Object(fr.a)(t,e);var n=Object(jr.a)(t);function t(e){var r;return Object(d.a)(this,t),(r=n.call(this,e)).state={valueFormatted:e.valueFormatted},r}return Object(b.a)(t,[{key:"refresh",value:function(e){return this.setState({valueFormatted:e.valueFormatted}),!0}},{key:"render",value:function(){var e=this.state.valueFormatted;return Object(Bn.jsx)(Or,{value:e})}}]),t}(a.Component),hr=function(e){var n=e.tickers,t=e.selectedCurrencyPair,r=e.onClick,c=Object(a.useState)(),o=Object(p.a)(c,2),i=o[0],u=o[1],l=[{headerName:"Ccy",field:"currencyPair",valueFormatter:function(e){return z(e.value)}},{headerName:"Bid Price",field:"bid",cellStyle:function(){return{color:wn.Bid,display:"flex","justify-content":"flex-end"}},type:"numericColumn",valueFormatter:gn,cellRenderer:"priceRenderer"},{headerName:"Ask Price",field:"ask",cellStyle:function(){return{color:wn.Ask}},valueFormatter:gn,cellRenderer:"priceRenderer"},{headerName:"Volume",field:"volume",valueFormatter:xn},{headerName:"",field:"prices",cellRenderer:"priceChartRenderer",width:100,cellStyle:function(){return{"padding-left":0,"padding-right":0}},equals:ae.isEqual}];return Object(a.useEffect)((function(){if(i){var e=[];i.forEachNode((function(n){var r=n.data.currencyPair===t;(n.isSelected()||r)&&e.push(n),n.setSelected(r)})),i.redrawRows({rowNodes:e})}}),[i,t]),Sn(i),Object(Bn.jsx)(ur,{className:"ag-theme-balham-dark",children:Object(Bn.jsx)(vn.AgGridReact,{columnDefs:l,rowData:n,rowClassRules:{"selected-row":function(e){return e.node.isSelected()},"stale-row":function(e){return e.data.isStale}},deltaRowDataMode:!0,getRowNodeId:function(e){return e.currencyPair},onGridReady:function(e){u(e.api)},rowSelection:"single",onRowClicked:function(e){r(e.data.currencyPair)},noRowsOverlayComponent:"customLoadingOverlay",frameworkComponents:{priceChartRenderer:br,priceRenderer:pr,customLoadingOverlay:Nn}})})},vr=Object(u.b)((function(e){return{tickers:Yn(e),selectedCurrencyPair:q(e)}}),(function(e){return{onClick:function(n){return e(N.selectCurrencyPair({currencyPair:n}))}}}))(hr),mr=Fn.a.div(Mt||(Mt=Object(An.a)(['\n  height: 100%;\n  display: grid;\n  grid-template-rows: 20px 1fr;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    "header"\n    "body";\n']))),yr=Fn.a.div(zt||(zt=Object(An.a)(["\n  grid-area: header;\n  color: ",";\n  font-size: 12px;\n"])),wn.Label),gr=Fn.a.div(Ut||(Ut=Object(An.a)(["\n  grid-area: body;\n"]))),Cr=function(e){var n=e.children,t=e.title;return Object(Bn.jsxs)(mr,{children:[Object(Bn.jsx)(yr,{children:t}),Object(Bn.jsx)(gr,{children:n})]})},xr=Fn.a.div(Gt||(Gt=Object(An.a)(["\n  font-size: 10px;\n  color: ",";\n  padding: 0 10px;\n  display: flex;\n  width: 85px;\n  justify-content: space-between;\n  color: ",";\n"])),wn.White,wn.LightGray),kr=function(){var e=Object(a.useState)(),n=Object(p.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)((function(){var e=void 0,n=setInterval((function(){var n=Date.now();e&&clearTimeout(e),e=setTimeout((function(){r(Date.now()-n)}))}),2e3);return function(){clearInterval(n),e&&clearTimeout(e)}}),[]),Object(Bn.jsxs)(xr,{children:[Object(Bn.jsx)("span",{children:"UI Latency: "}),Object(Bn.jsxs)("span",{children:[t||"---","ms"]})]})},Sr=Object(E.a)((function(e){return e.ping}),(function(e){return e.latency})),Ar=Fn.a.div(Wt||(Wt=Object(An.a)(["\n  color: ",";\n  font-size: 10px;\n  width: 85px;\n  display: flex;\n  justify-content: space-between;\n  color: ",";\n"])),wn.White,wn.LightGray),Fr=Fn.a.i(qt||(qt=Object(An.a)(["\n  font-size: 16px;\n"]))),wr=function(e){var n=e.latency;return Object(Bn.jsxs)(Ar,{children:[Object(Bn.jsx)("span",{children:"Round trip: "}),-1===n?Object(Bn.jsx)(Fr,{className:"material-icons",children:"warning"}):Object(Bn.jsxs)("span",{children:[n||"---","ms"]})]})},Rr=Object(u.b)((function(e){return{latency:Sr(e)}}))(wr),Tr=Fn.a.div(Ht||(Ht=Object(An.a)(["\n  perspective: ",";\n  width: 100%;\n  height: 100%;\n"])),(function(e){var n=e.width;return"".concat(n,"px")})),Er=Fn.a.div(Kt||(Kt=Object(An.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transform-style: preserve-3d;\n  transform: ",";\n"])),(function(e){var n=e.width;return"translateZ(".concat(-n/2,"px)")})),Pr=Fn.a.div(Vt||(Vt=Object(An.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n"])),wn.BackgroundColor),Br=Object(Fn.a)(Pr)(Yt||(Yt=Object(An.a)(["\n  transform: ",";\n"])),(function(e){var n=e.width;return"rotateY(0deg) translateZ(".concat(n/2,"px)")})),Nr=Object(Fn.a)(Pr)(Zt||(Zt=Object(An.a)(["\n  transform: ",";\n  border: 1px solid ",";\n"])),(function(e){var n=e.width;return"rotateY(90deg) translateZ(".concat(n/2,"px)")}),wn.Border),Dr=function(e){var n=e.trigger,t=e.children,r=Object(a.useState)(0),c=Object(p.a)(r,2),o=c[0],i=c[1],u=Zn(n),l=Zn(o),s=Object(a.createRef)(),d=Object(a.createRef)();return Object(a.useEffect)((function(){var e=function(){if(s&&s.current){var e=s.current.getBoundingClientRect().width;console.log("Update cube width to ".concat(e)),i(e)}else console.warn("Failed to update cube")},n=Object(ae.debounce)((function(){requestAnimationFrame(e)}),200);return e(),window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[s]),Object(a.useEffect)((function(){var e=void 0;return u&&l===o&&requestAnimationFrame((function(){var n;e=null===(n=d.current)||void 0===n?void 0:n.animate([{transform:"translateZ(-".concat(o/2,"px)")},{transform:"translateZ(-".concat(o/2,"px) rotateY(-90deg)")}],{duration:1e3,iterations:1,easing:"ease-out"})})),function(){e&&e.cancel()}}),[n,o]),Object(Bn.jsx)(Tr,{ref:s,width:o,children:Object(Bn.jsxs)(Er,{ref:d,width:o,children:[Object(Bn.jsx)(Br,{width:o,children:t}),Object(Bn.jsx)(Nr,{width:o})," }"]})})},Lr=function(e){var n=e.currencyPair,t=e.children;return Object(Bn.jsx)(Dr,{trigger:n,children:t})},_r=Object(u.b)((function(e){return{currencyPair:q(e)}}))(Lr),Ir=Fn.a.div(Jt||(Jt=Object(An.a)(["\n  background-color: ",";\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n"])),wn.BackgroundColor),Mr=Fn.a.div(Xt||(Xt=Object(An.a)(['\n  display: grid;\n  grid-gap: 5px;\n  padding: 5px 10px;\n  width: 100%;\n  height: 100%;\n  @media only screen and (min-width: 1200px) {\n    grid-template-rows: 40px 70px 1fr 250px 30px;\n    grid-template-columns: 450px 1fr 1fr;\n    grid-template-areas:\n      "header header header"\n      "tickers tickers tickers"\n      "market candles candles"\n      "trades book depth"\n      "footer footer footer";\n  }\n\n  @media only screen and (min-width: 600px) and (max-width: 1200px) {\n    grid-template-rows: 40px 70px 1fr 1fr 30px;\n    grid-template-columns: 1fr 1fr;\n    grid-template-areas:\n      "header header"\n      "market book"\n      "market book"\n      "trades depth"\n      "footer footer";\n\n    .tickers {\n      display: none;\n    }\n\n    .candles-chart {\n      display: none;\n    }\n  }\n\n  @media only screen and (max-width: 600px) {\n    grid-template-rows: 40px calc(100% - 90px) 30px;\n    grid-template-columns: calc(100% - 20px);\n    grid-template-areas:\n      "header"\n      "market"\n      "footer";\n\n    .candles-chart {\n      display: none;\n    }\n  }\n']))),zr=Fn.a.div($t||($t=Object(An.a)(["\n  grid-area: header;\n  color: ",";\n  font-family: FiraSans-MediumItalic;\n  background-color: #2d3436;\n  padding: 0 0 0 10px;\n  font-size: 28px;\n"])),wn.White),Ur=Fn.a.div(Qt||(Qt=Object(An.a)(["\n  grid-area: tickers;\n  margin: 0 auto;\n"]))),Gr=Fn.a.div(er||(er=Object(An.a)(["\n  grid-area: market;\n"]))),Wr=Fn.a.div(nr||(nr=Object(An.a)(["\n  grid-area: trades;\n"]))),qr=Fn.a.div(tr||(tr=Object(An.a)(["\n  grid-area: candles;\n"]))),Hr=Fn.a.div(rr||(rr=Object(An.a)(["\n  grid-area: book;\n"]))),Kr=Fn.a.div(ar||(ar=Object(An.a)(["\n  grid-area: depth;\n"]))),Vr=Fn.a.div(cr||(cr=Object(An.a)(["\n  grid-area: footer;\n  padding: 0 10px;\n  display: flex;\n  justify-content: flex-end;\n"])));t(121),t(122),t(123);var Yr=function(){var e=function(){var e=Object(l.e)(Ze,$e(Object(l.a)(Xe)));return Xe.run(Ye),e}();return Object(a.useEffect)((function(){e.dispatch(T.bootstrapApp())}),[]),Object(Bn.jsx)(u.a,{store:e,children:Object(Bn.jsx)(Ir,{children:Object(Bn.jsxs)(Mr,{children:[Object(Bn.jsx)(zr,{children:"Trader Interface"}),Object(Bn.jsx)(Ur,{children:Object(Bn.jsx)(ft,{})}),Object(Bn.jsx)(Gr,{children:Object(Bn.jsx)(Cr,{title:"Market",children:Object(Bn.jsx)(vr,{})})}),Object(Bn.jsx)(Wr,{children:Object(Bn.jsx)(Cr,{title:"Trades",children:Object(Bn.jsx)(_r,{children:Object(Bn.jsx)(zn,{})})})}),Object(Bn.jsx)(qr,{children:Object(Bn.jsx)(Ct,{})}),Object(Bn.jsx)(Hr,{children:Object(Bn.jsx)(Cr,{title:"Book",children:Object(Bn.jsx)(_r,{children:Object(Bn.jsx)(Bt,{})})})}),Object(Bn.jsx)(Kr,{children:Object(Bn.jsx)(Cr,{title:"Depth",children:Object(Bn.jsx)(_r,{children:Object(Bn.jsx)(ir,{})})})}),Object(Bn.jsxs)(Vr,{children:[Object(Bn.jsx)(Rr,{}),Object(Bn.jsx)(kr,{})]})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(Bn.jsx)(c.a.StrictMode,{children:Object(Bn.jsx)(Yr,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,n,t){}},[[124,1,2]]]);
//# sourceMappingURL=main.be7cda01.chunk.js.map